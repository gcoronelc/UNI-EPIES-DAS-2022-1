
CREATE TABLE MARCA
( 
	IDMARCA              integer  NOT NULL ,
	NOMBRE               varchar(100)  NOT NULL ,
	CONSTRAINT XPKMARCA PRIMARY KEY (IDMARCA ASC)
)
go



CREATE TABLE AUTO
( 
	IDAUTO               integer IDENTITY ( 1,1 ) ,
	MATRICULA            varchar(20)  NOT NULL ,
	IDMARCA              integer  NOT NULL ,
	MODELO               varchar(20)  NOT NULL ,
	PRECIO               numeric(10,2)  NOT NULL ,
	COLOR                varchar(20)  NOT NULL ,
	VENDIDO              integer  NOT NULL ,
	CONSTRAINT XPKAUTO PRIMARY KEY (IDAUTO ASC),
	CONSTRAINT U_AUTO_MATRICULA UNIQUE (MATRICULA  ASC),
	CONSTRAINT FK_AUTO_MARCA FOREIGN KEY (IDMARCA) REFERENCES MARCA(IDMARCA)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE CLIENTE
( 
	IDCLIENTE            integer IDENTITY ( 1,1 ) ,
	NOMBRE               varchar(100)  NOT NULL ,
	APELLIDO             varchar(100)  NOT NULL ,
	DNI                  varchar(20)  NOT NULL ,
	TELEFONO             varchar(20)  NOT NULL ,
	CORREO               varchar(100)  NOT NULL ,
	CONSTRAINT XPKCLIENTE PRIMARY KEY (IDCLIENTE ASC)
)
go



CREATE TABLE ROL
( 
	IDROL                integer  NOT NULL ,
	NOMBRE               varchar(100)  NOT NULL ,
	CONSTRAINT XPKROL PRIMARY KEY (IDROL ASC)
)
go



CREATE TABLE EMPLEADO
( 
	IDEMPLEADO           integer  NOT NULL ,
	NOMBRE               varchar(100)  NOT NULL ,
	APELLIDO             varchar(100)  NOT NULL ,
	DNI                  varchar(20)  NOT NULL ,
	TELEFONO             varchar(20)  NOT NULL ,
	CORREO               varchar(100)  NOT NULL ,
	IDROL                integer  NOT NULL ,
	USUARIO              varchar(20)  NOT NULL ,
	CLAVE                varchar(20)  NOT NULL ,
	CONSTRAINT XPKEMPLEADO PRIMARY KEY (IDEMPLEADO ASC),
	CONSTRAINT U_EMPLEADO_USUARIO UNIQUE (USUARIO  ASC),
	CONSTRAINT FK_EMPLEADO_ROL FOREIGN KEY (IDROL) REFERENCES ROL(IDROL)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE VENTA
( 
	IDVENTA              integer IDENTITY ( 1,1 ) ,
	IDAUTO               integer  NOT NULL ,
	IDCLIENTE            integer  NOT NULL ,
	FECHA_REGISTRO       datetime  NOT NULL ,
	FECHA_PAGO           datetime  NULL ,
	VENDEDOR             integer  NOT NULL ,
	CAJA                 integer  NULL ,
	IMPORTE              numeric(10,2)  NOT NULL ,
	IMPUESTO             numeric(10,2)  NOT NULL ,
	TOTAL                numeric(10,2)  NOT NULL ,
	ESTADO               integer  NOT NULL ,
	CONSTRAINT XPKVENTA PRIMARY KEY (IDVENTA ASC),
	CONSTRAINT FK_VENTA_AUTO FOREIGN KEY (IDAUTO) REFERENCES AUTO(IDAUTO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_VENTA_CLIENTE FOREIGN KEY (IDCLIENTE) REFERENCES CLIENTE(IDCLIENTE)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_VENTA_EMPLEADO_VENDEDOR FOREIGN KEY (VENDEDOR) REFERENCES EMPLEADO(IDEMPLEADO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_VENTA_EMPLEADO_CAJA FOREIGN KEY (CAJA) REFERENCES EMPLEADO(IDEMPLEADO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE TIPOREVISION
( 
	IDTIPOREVISION       integer  NOT NULL ,
	NOMBRE               varchar(100)  NOT NULL ,
	PRECIO               numeric(10,2)  NOT NULL ,
	CONSTRAINT XPKTIPOREVISION PRIMARY KEY (IDTIPOREVISION ASC)
)
go


